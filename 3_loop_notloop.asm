
; You may customize this and other start-up templates; 
; The location of this template is c:\emu8086\inc\0_com_template.txt

org 100h
             

result dw ?   

pow macro X
mov result, 0
mov bx, X
powloop:
mov ax, bx
add ax, bx
sub ax, 1
add result, ax
dec bx
cmp bx,00h
je @1
jmp powloop 
@1:
mov ax, result    
endm            



  
mov cx, 5  
cicle:
 pow cx    ; ax | result <- pow(5,2)  25
 mov ax,4  ; ax <- 4
 mul cx    ; ax <- ax*cx              20
 sub ax, 5 ; ax <- ax - 5       15
 add ax, result  ; ax <- ax + result
 cmp bx,00h
 je @2 
jmp cicle
    
@2:
call OutInt
   
   

;-----------------------------------------------------;  

 
exit:  
    xor   ax,ax        
    int   16h        
    ret                
    

   
OutInt proc
        
;; ???? ????? ????????, ?? ?????????? ????????????????? ????????? ??????
;; ????????? ????? ?? ????.
;   test    ax, ax
;   jns     oi1
;
;; ???? ??? ?????????????, ??????? ????? ? ??????? ??? ??????.
;   mov  cx, ax
;   mov     ah, 02h
;   mov     dl, '-'
;   int     21h
;   mov  ax, cx
;   neg     ax
;; ?????????? ???? ????? ??????? ? CX.
;oi1:  
    xor     cx, cx
    mov     bx, 10 ; ????????? ??. 10 ??? ???????????? ? ?.?.
oi2:
    xor     dx,dx
    div     bx
; ????? ????? ?? ????????? ??. ? ??????? ?????????? ????????? ?????.
; ????? ???????? ?? ??????, ??????? ???????? ?? ? ?????.
    push    dx
    inc     cx
; ? ? ??????? ????????? ?? ?? ?????, ??????? ?? ???? ?????????
; ????? ??????, ???? ?? ????????? ????, ??? ??????, ??? ??????
; ????? ?????? ????.
    test    ax, ax
    jnz     oi2
; ?????? ????????? ? ??????.
    mov     ah, 02h
oi3:
    pop     dx
; ????????? ????????? ?????, ????????? ?? ? ?????? ? ???????.
;; ???????????????? ???? ????????? ?? > 10, ?.?. ??? ?????? ????????? ?????
;   cmp     dl,9
;   jbe     oi4
;   add     dl,7
;oi4:
    add     dl, '0' 
    
    mov y, dx
    mov ah, 9h


    mov dx, offset string
    int 21h
    int 20h
 
; ???????? ????? ??????? ???, ??????? ???? ?????????.
    loop    oi3
    ret
OutInt endp

   string db "Y = "
    y dw ?, "$"
           